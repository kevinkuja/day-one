import { Deployer } from '@matterlabs/hardhat-zksync';
import { ContractType, ContractInfo, saveContractToAddressBook } from './lensUtils';
import { deployContract, getWallet, LOCAL_RICH_WALLETS } from './utils';
import { ethers } from 'ethers';
import * as hre from 'hardhat';

async function deploy() {
  const DEPLOYING_FR = Boolean(process.env.DEPLOY_FR);

  const regularDeployerPk = process.env.WALLET_PRIVATE_KEY;
  if (!regularDeployerPk) {
    throw new Error('WALLET_PRIVATE_KEY not found in environment variables');
  }

  const __create2DeployerPk__ = process.env.LENS_CREATE2_DEPLOYER_PRIVATE_KEY;
  if (!__create2DeployerPk__) {
    throw new Error('LENS_CREATE2_DEPLOYER_PRIVATE_KEY not found in environment variables');
  }

  const create2ProxyAdminPk = process.env.PROXY_ADMIN_PRIVATE_KEY;
  if (!create2ProxyAdminPk) {
    throw new Error('PROXY_ADMIN_PRIVATE_KEY not found in environment variables');
  }

  const lensCreate2OwnerAddress = process.env.LENS_CREATE2_OWNER_ADDRESS;
  if (!lensCreate2OwnerAddress) {
    throw new Error('LENS_CREATE2_OWNER_ADDRESS not found in environment variables');
  }

  const regularDeployerWallet = getWallet(regularDeployerPk);
  const __create2DeployerWallet__ = getWallet(__create2DeployerPk__);
  const create2ProxyAdminWallet = getWallet(create2ProxyAdminPk);

  console.log(`Address of Regular deployer: ${await regularDeployerWallet.getAddress()}`);
  console.log(
    `Address of LensCreate2 deployer (!): ${await __create2DeployerWallet__.getAddress()}`
  );
  console.log(`Address of LensCreate2 owner: ${lensCreate2OwnerAddress}`);
  console.log(`Address of LensCreate2 proxy admin: ${await create2ProxyAdminWallet.getAddress()}`);

  if (!DEPLOYING_FR) {
    const richWallet = getWallet(LOCAL_RICH_WALLETS[0].privateKey);
    await richWallet.sendTransaction({
      to: __create2DeployerWallet__.address,
      value: ethers.parseEther('1.0'),
    });
  }

  const nonce = await __create2DeployerWallet__.getNonce();

  const lensCreate2Info: ContractInfo = {
    name: 'LensCreate2Impl',
    contractName: 'LensCreate2',
    contractType: ContractType.Aux,
    constructorArguments: [],
  };

  const __create2Deployer__ = new Deployer(hre, __create2DeployerWallet__);
  const proxyArtifact = await __create2Deployer__
    .loadArtifact('TransparentUpgradeableProxy')
    .catch((error) => {
      if (
        error?.message?.includes(`Artifact for contract "TransparentUpgradeableProxy" not found.`)
      ) {
        console.error(error.message);
        throw `⛔️ Please make sure you have compiled your contracts or specified the correct contract name!`;
      } else {
        throw error;
      }
    });

  const artifactBytecodeHash = bytecodeHash(proxyArtifact.bytecode);
  const cachedBytecodeHash = bytecodeHash(transparentUpgradeableProxyBytecode);

  console.log(`Artifact bytecodeHash: ${artifactBytecodeHash}`);
  console.log(`Cached bytehash: ${cachedBytecodeHash}`);

  if (artifactBytecodeHash != cachedBytecodeHash) {
    console.error(
      `Artifact TransparentUpgradeableProxy bytecode doesn't match the bytecode that was used to deploy LensCreate2.`
    );
    console.error(`Please check what changed since this commit was posted`);
    throw 'Bytecodes mismatch';
  }

  console.log(`LensCreate2 deployer nonce: ${nonce}`);
  if (nonce !== 0) {
    throw new Error('LensCreate2 deployer nonce is not 0 - ABORTING');
  }

  const emptyContractDeployed = await deployContract('EmptyImplementation', [], {
    wallet: regularDeployerWallet,
  });

  console.log(`Empty contract deployed at ${emptyContractDeployed.address}`);

  const lensCreate2ProxyDeployed = await deployContract(
    'TransparentUpgradeableProxy',
    [await emptyContractDeployed.getAddress(), await create2ProxyAdminWallet.getAddress(), '0x'],
    {
      wallet: __create2DeployerWallet__,
    }
  );

  const lensCreate2ImplementationDeployed = await deployContract(
    lensCreate2Info.contractName,
    lensCreate2Info.constructorArguments,
    {
      wallet: regularDeployerWallet,
    }
  );

  lensCreate2Info.address = await lensCreate2ProxyDeployed.getAddress();

  const lensCreate2Owner = await regularDeployerWallet.getAddress();

  console.log(`LensCreate2 Owner = ${lensCreate2Owner}`);

  const initializerABI = ['function initialize(address owner) external'];
  const initializerInterface = new ethers.Interface(initializerABI);
  const initializeEncodedCall = initializerInterface.encodeFunctionData('initialize', [
    lensCreate2Owner,
  ]);

  console.log('Initialize encoded call = ', initializeEncodedCall);

  const transparentUpgradeableProxyArtifact = await hre.artifacts.readArtifact(
    'ITransparentUpgradeableProxy'
  );
  const transparentUpgradeableProxy = new ethers.Contract(
    lensCreate2Info.address,
    transparentUpgradeableProxyArtifact.abi,
    create2ProxyAdminWallet
  );

  console.log('About to upgradeAndCall...');

  const upgradeTx = await transparentUpgradeableProxy.upgradeToAndCall(
    await lensCreate2ImplementationDeployed.getAddress(),
    initializeEncodedCall
  );

  console.log('Upgrade tx sent:', upgradeTx.hash);

  await upgradeTx.wait();

  console.log('Upgrade tx mined');

  const lensCreate2Artifact = await new Deployer(hre, regularDeployerWallet)
    .loadArtifact('LensCreate2')
    .catch((error) => {
      if (error?.message?.includes(`Artifact for contract "LensCreate2" not found.`)) {
        console.error(error.message);
        throw `⛔️ Please make sure you have compiled your contracts or specified the correct contract name!`;
      } else {
        throw error;
      }
    });

  const lensCreate2 = new hre.ethers.Contract(
    lensCreate2Info.address,
    lensCreate2Artifact.abi,
    regularDeployerWallet
  );
  const actualProxyBytecodeHash = await lensCreate2.PROXY_BYTECODE_HASH();

  console.log(`Actual Proxy Bytecode Hash: ${actualProxyBytecodeHash}`);

  if (actualProxyBytecodeHash != '0x' + cachedBytecodeHash) {
    console.error(`Actual Proxy Bytecode Hash doesn't match the cached bytecode hash`);
    console.error(`Please check what changed since this commit was posted`);
    throw 'Proxy bytecode hash mismatch';
  }

  const predictedAddress = await lensCreate2['getAddress(bytes32)'].staticCall(
    '0x0000000000000000000000000000000000000000000000000000000000000000'
  );

  console.log(`Predicted Address at salt 0: ${predictedAddress}`);
  console.log(`Assumed Address at salt 0: ${assumedAddress}`);

  if (predictedAddress != assumedAddress) {
    console.error(`Predicted address at salt 0 doesn't match the assumed address`);
    console.error(`Please check what changed since this commit was posted`);
    throw 'Predicted addresses mismatch';
  }

  const expectedCreate2Address = '0x52AF9CF29976C310E3DE03C509E108edB6edb8c0';
  console.log(`LensCreate2 is expected to be deloyed at ${expectedCreate2Address}`);
  console.log(`${lensCreate2Info.contractName} deployed at ${lensCreate2Info.address}`);

  if (lensCreate2Info.address != expectedCreate2Address) {
    console.error(`Predicted address for LensCreate2 doesn't match the expected address`);
    console.error(`Please check what changed since this commit was posted`);
    throw 'Predicted addresses mismatch';
  }

  saveContractToAddressBook(lensCreate2Info);
}

if (require.main === module) {
  deploy()
    .then(() => process.exit(0))
    .catch((error) => {
      console.error(error);
      process.exit(1);
    });
}

export default deploy;

function bytecodeHash(bytecode: string): string {
  // Remove '0x' prefix if present
  const cleanBytecode = bytecode.startsWith('0x') ? bytecode.slice(2) : bytecode;

  // Convert hex string to byte array
  const byteArray = Buffer.from(cleanBytecode, 'hex');

  // Calculate SHA256 hash
  const hash = Buffer.from(require('crypto').createHash('sha256').update(byteArray).digest());

  // Modify first 4 bytes according to spec
  hash[0] = 1;
  hash[1] = 0;

  // Set bytes 2-3 to length/32 as uint16
  const lenBytes = Buffer.alloc(2);
  lenBytes.writeUInt16BE(byteArray.length / 32);
  hash[2] = lenBytes[0];
  hash[3] = lenBytes[1];

  return hash.toString('hex');
}

// Assumed address at salt 0:
const assumedAddress = '0xff82e744035Bb7C86044F67314772Cbf87A8bBf2';

// Assumed bytecode to compare with:
const transparentUpgradeableProxyBytecode =
  '00090000000000020000006003100270000001050330019700000001002001900000001e0000c13d0000008008000039000000400080043f00000000040004110000011c02000041000000000502041a0000010e02500197000000000003004b0000005b0000c13d000000000024004b0000006c0000c13d000000000101043b0000012501100197000001260010009c000000cc0000a13d000001270010009c0000017a0000613d000001280010009c000001680000613d000001290010009c0000016c0000c13d0000000001000416000000000001004b000000d00000c13d000000a00020043f000001810000013d0000001f0230003900000106022001970000008002200039000000400020043f0000001f0430018f000001070530019800000080025000390000002c0000613d0000008006000039000000000701034f000000007807043c0000000006860436000000000026004b000000280000c13d000000000004004b000000390000613d000000000151034f0000000304400210000000000502043300000000054501cf000000000545022f000000000101043b0000010004400089000000000141022f00000000014101cf000000000151019f00000000001204350000005f0030008c000000d00000a13d000000800700043d000001080070009c000000d00000813d000000a00600043d000001080060009c000000d00000813d000000c00200043d000001090020009c000000d00000813d00000080033000390000009f01200039000000000031004b00000000040000190000010a040040410000010a01100197000000000001004b00000000050000190000010a050020410000010a0010009c000000000504c019000000000005004b000000d00000613d00000080012000390000000001010433000001090010009c000001fc0000413d0000011701000041000000000010043f0000004101000039000000040010043f00000118010000410000041000010430000000000024004b000000900000c13d000000000401043b0000012504400197000001260040009c000000d20000a13d000001270040009c000001880000613d000001280040009c0000019f0000613d000001290040009c0000016c0000c13d0000000001000416000000000001004b000000d00000c13d000000a00020043f0000018f0000013d0000010f01000041000000000101041a00000000030004140000010e02100197000001050030009c0000010503008041000000c001300210040e04090000040f00000060051002700000001f0450018f00000107035001980000007e0000613d000000000601034f0000000007000019000000006806043c0000000007870436000000000037004b0000007a0000c13d0000010505500197000000000004004b0000008c0000613d000000000131034f0000000304400210000000000603043300000000064601cf000000000646022f000000000101043b0000010004400089000000000141022f00000000014101cf000000000161019f000000000013043500000060015002100000000100200190000003030000613d0000040f0001042e0000001f0530018f0000010f02000041000000000202041a00000107043001980000009b0000613d000000000601034f0000000007000019000000006806043c0000000007870436000000000047004b000000970000c13d0000010e02200197000000000005004b000000a90000613d000000000141034f0000000305500210000000000604043300000000065601cf000000000656022f000000000101043b0000010005500089000000000151022f00000000015101cf000000000161019f000000000014043500000060013002100000000003000414000001050030009c0000010503008041000000c003300210000000000113019f040e04090000040f00000060051002700000001f0450018f0000010703500198000000ba0000613d000000000601034f0000000007000019000000006806043c0000000007870436000000000037004b000000b60000c13d0000010505500197000000000004004b000000c80000613d000000000131034f0000000304400210000000000603043300000000064601cf000000000646022f000000000101043b0000010004400089000000000141022f00000000014101cf000000000161019f000000000013043500000060015002100000000100200190000003030000613d0000040f0001042e0000012a0010009c000001680000613d0000012b0010009c0000016c0000c13d000000000100001900000410000104300000012a0040009c000001c70000613d0000012b0040009c0000016c0000c13d000000030030008c000000d00000a13d000000430030008c000000d00000a13d0000000402100370000000000202043b000001080020009c000000d00000813d0000002404100370000000000504043b000001090050009c000000d00000813d0000002304500039000000000034004b00000000060000190000010a060040410000010a04400197000000000004004b00000000070000190000010a070020410000010a0040009c000000000706c019000000000007004b000000d00000613d0000000406500039000000000461034f000000000404043b000001090040009c000000550000813d0000001f0740003900000134077001970000003f0770003900000134077001970000012e0070009c000000550000813d0000008007700039000000400070043f000000800040043f00000000054500190000002405500039000000000035004b000000d00000213d000500000008001d0000002003600039000000000331034f00000134054001980000001f0640018f000000a0015000390000010d0000613d000000a007000039000000000803034f000000008908043c0000000007970436000000000017004b000001090000c13d000000000006004b0000011a0000613d000000000353034f0000000305600210000000000601043300000000065601cf000000000656022f000000000303043b0000010005500089000000000353022f00000000035301cf000000000363019f0000000000310435000000a00140003900000000000104350000010c0100004100000000001004430000010e01200197000600000001001d00000004001004430000000001000414000001050010009c0000010501008041000000c0011002100000010d011001c70000800202000039040e04040000040f0000000100200190000003010000613d000000000101043b000000000001004b0000022e0000613d0000010f01000041000000000201041a00000110022001970000000605000029000000000252019f000000000021041b0000000001000414000001050010009c0000010501008041000000c00110021000000111011001c70000800d0200003900000002030000390000011204000041040e03ff0000040f0000000100200190000000d00000613d000000400100043d000400000001001d000001130010009c000000550000813d00000004030000290000006001300039000000400010043f000000400130003900000114020000410000000000210435000000270100003900000000021304360000011501000041000300000002001d0000000000120435000000800100043d000001050010009c000001050100804100000060011002100000000002000414000001050020009c0000010502008041000000c002200210000000000112019f0000012f011001c70000000602000029040e04090000040f00000060031002700000010504300198000003ab0000c13d000000600300003900000000010304330000000100200190000003d30000613d000000000001004b000001fa0000c13d0000010c010000410000000000100443000000060100002900000004001004430000000001000414000002e50000013d0000000001000416000000000001004b000000000100001900000410000104300000011901000041000000800010043f0000002001000039000000840010043f0000004201000039000000a40010043f0000013001000041000000c40010043f0000013101000041000000e40010043f0000013201000041000001040010043f000001330100004100000410000104300000000001000416000000000001004b000000d00000c13d0000010f01000041000000000101041a0000010e01100197000000a00010043f0000002001000039000000800010043f000000c001000039000000400010043f000700800000003d0000000701000029000001950000013d0000000001000416000000000001004b000000d00000c13d0000010f01000041000000000101041a0000010e01100197000000a00010043f0000002001000039000000800010043f000000c001000039000000400010043f000800800000003d00000008010000290000002002100039000001050020009c000001050200804100000040022002100000000001010433000001050010009c00000105010080410000006001100210000000000121019f0000040f0001042e0000000004000416000000000004004b000000d00000c13d000000030030008c000000d00000a13d000000230030008c000000d00000a13d0000000401100370000000000101043b000001080010009c000000d00000813d000500000005001d000000800020043f0000010e01100197000600000001001d000000a00010043f0000000001000414000001050010009c0000010501008041000000c0011002100000012c011001c70000800d0200003900000001030000390000011e04000041040e03ff0000040f0000000100200190000000d00000613d000000400100043d0000000603000029000000000003004b000002760000c13d00000064021000390000012003000041000000000032043500000044021000390000012103000041000000000032043500000024021000390000002603000039000002370000013d0000000002000416000000000002004b000000d00000c13d000000030030008c000000d00000a13d000000230030008c000000d00000a13d0000000401100370000000000101043b000001080010009c000000d00000813d000000a002000039000000400020043f000000800000043f0000010c0200004100000000002004430000010e01100197000600000001001d00000004001004430000000001000414000001050010009c0000010501008041000000c0011002100000010d011001c70000800202000039040e04040000040f0000000100200190000003010000613d000000000101043b000000000001004b0000022e0000613d0000010f01000041000000000201041a00000110022001970000000605000029000000000252019f000000000021041b0000000001000414000001050010009c0000010501008041000000c00110021000000111011001c70000800d0200003900000002030000390000011204000041040e03ff0000040f0000000100200190000000d00000613d000000800100043d000000000001004b000002bb0000c13d000000400100043d0000027b0000013d0000001f0410003900000134044001970000003f044000390000013404400197000000400800043d0000000004480019000000000084004b000000000500003900000001050040390000010b0040009c000000550000213d0000000100500190000000550000c13d000000400040043f0000000009180436000000a0022000390000000004210019000000000034004b000000d00000213d000500000008001d000400000006001d000000000001004b0000021b0000613d000000000300001900000000049300190000000005230019000000000505043300000000005404350000002003300039000000000013004b000002140000413d000300000009001d000000000119001900000000000104350000010c010000410000000000100443000600000007001d00000004007004430000000001000414000001050010009c0000010501008041000000c0011002100000010d011001c70000800202000039040e04040000040f0000000100200190000003010000613d000000000101043b000000000001004b000002420000c13d000000400100043d00000064021000390000012303000041000000000032043500000044021000390000012403000041000000000032043500000024021000390000002d03000039000000000032043500000119020000410000000000210435000000040210003900000020030000390000000000320435000001050010009c0000010501008041000000400110021000000122011001c7000004100001043000000006010000290000010e051001970000010f01000041000000000201041a0000011002200197000000000252019f000000000021041b0000000001000414000001050010009c0000010501008041000000c00110021000000111011001c70000800d0200003900000002030000390000011204000041040e03ff0000040f0000000100200190000000d00000613d00000005040000290000000001040433000000000001004b000002820000c13d0000011c01000041000000000301041a00000004010000290000010e04100197000000400100043d0000002002100039000600000004001d0000000000420435000500000003001d0000010e023001970000000000210435000001050010009c000001050100804100000040011002100000000002000414000001050020009c0000010502008041000000c002200210000000000112019f0000011d011001c70000800d0200003900000001030000390000011e04000041040e03ff0000040f0000000100200190000003020000613d000000060000006b000003040000c13d000000400100043d000001be0000013d00000005020000290000011002200197000000000223019f0000011c03000041000000000023041b0000012d0010009c000000550000813d0000002002100039000000400020043f0000000000010435000800000001001d000001940000013d000000400300043d000001130030009c000000550000813d0000006001300039000000400010043f0000004001300039000001140200004100000000002104350000002701000039000200000003001d00000000021304360000011501000041000100000002001d00000000001204350000000301000029000001050010009c000001050100804100000040011002100000000002040433000001050020009c00000105020080410000006002200210000000000112019f0000000002000414000001050020009c0000010502008041000000c002200210000000000121019f0000000602000029040e04090000040f000000600310027000000105033001980000030e0000c13d000900600000003d000000090100002900000000130104340000000100200190000003350000613d000000000003004b000002580000c13d0000010c010000410000000000100443000000060100002900000004001004430000000001000414000001050010009c0000010501008041000000c0011002100000010d011001c70000800202000039040e04040000040f0000000100200190000003010000613d000000000101043b000000000001004b000002580000c13d000002f00000013d000000400100043d000500000001001d000001130010009c000000550000813d00000005030000290000006001300039000000400010043f000000400130003900000114020000410000000000210435000000270100003900000000021304360000011501000041000400000002001d0000000000120435000000800100043d000001050010009c000001050100804100000060011002100000000002000414000001050020009c0000010502008041000000c002200210000000000112019f0000012f011001c70000000602000029040e04090000040f00000060031002700000010505300198000003530000c13d00000060030000390000008004000039000000000103043300000001002001900000037a0000613d000000000001004b000001fa0000c13d0000010c010000410000000000100443000000060100002900000004001004430000000001000414000001050010009c0000010501008041000000c0011002100000010d011001c70000800202000039040e04040000040f0000000100200190000003010000613d000000000101043b000000000001004b000001fa0000c13d000000400100043d00000044021000390000011a03000041000000000032043500000024021000390000001d03000039000000000032043500000119020000410000000000210435000000040210003900000020030000390000000000320435000001050010009c000001050100804100000040011002100000011b011001c70000041000010430000000000001042f000000000100001900000410000104300000000501000029000001100110019700000006011001af0000011c02000041000000000012041b0000002001000039000001000010044300000120000004430000011f010000410000040f0001042e0000001f0430003900000106044001970000003f044000390000011604400197000000400500043d0000000004450019000000000054004b000000000600003900000001060040390000010b0040009c000000550000213d0000000100600190000000550000c13d000000400040043f0000001f0430018f0000000006350436000900000005001d00000107053001980000000003560019000003270000613d000000000701034f000000007807043c0000000006860436000000000036004b000003230000c13d000000000004004b000002a40000613d000000000151034f0000000304400210000000000503043300000000054501cf000000000545022f000000000101043b0000010004400089000000000141022f00000000014101cf000000000151019f0000000000130435000002a40000013d000000000003004b0000039b0000c13d000000400400043d000600000004001d0000011901000041000000000014043500000004014000390000002002000039000000000021043500000002010000290000000003010433000500000003001d0000002401400039000000000031043500000044024000390000000101000029040e03f10000040f00000005010000290000001f0110003900000134011001970000004401100039000001050010009c00000105010080410000000602000029000001050020009c000001050200804100000060011002100000004002200210000000000121019f00000410000104300000001f0350003900000106033001970000003f033000390000011604300197000000400300043d0000000004430019000000000034004b000000000600003900000001060040390000010b0040009c000000550000213d0000000100600190000000550000c13d000000400040043f0000001f0650018f0000000004530436000001070750019800000000057400190000036c0000613d000000000801034f0000000009040019000000008a08043c0000000009a90436000000000059004b000003680000c13d000000000006004b000002db0000613d000000000171034f0000000306600210000000000705043300000000076701cf000000000767022f000000000101043b0000010006600089000000000161022f00000000016101cf000000000171019f0000000000150435000002db0000013d000000000001004b000003a30000c13d000000400100043d0000011902000041000000000021043500000004021000390000002003000039000000000032043500000005020000290000000002020433000000240310003900000000002304350000004403100039000000000002004b0000000407000029000003920000613d000000000400001900000000054300190000000006740019000000000606043300000000006504350000002004400039000000000024004b0000038b0000413d0000001f042000390000013404400197000000000223001900000000000204350000004402400039000001050020009c000001050200804100000060022002100000039e0000013d000001050030009c00000105030080410000006002300210000001050010009c00000105010080410000004001100210000000000112019f0000041000010430000001050040009c00000105040080410000004002400210000001050010009c00000105010080410000006001100210000000000121019f00000410000104300000001f0340003900000106033001970000003f033000390000011605300197000000400300043d0000000005530019000000000035004b000000000600003900000001060040390000010b0050009c000000550000213d0000000100600190000000550000c13d000000400050043f0000001f0540018f00000000074304360000010706400198000500000007001d0000000004670019000003c50000613d000000000701034f0000000508000029000000007907043c0000000008980436000000000048004b000003c10000c13d000000000005004b0000015d0000613d000000000161034f0000000305500210000000000604043300000000065601cf000000000656022f000000000101043b0000010005500089000000000151022f00000000015101cf000000000161019f00000000001404350000015d0000013d000000000001004b000003ec0000c13d000000400100043d0000011902000041000000000021043500000004021000390000002003000039000000000032043500000004020000290000000002020433000000240310003900000000002304350000004403100039000000000002004b0000000307000029000003920000613d000000000400001900000000054300190000000006740019000000000606043300000000006504350000002004400039000000000024004b000003e40000413d000003920000013d0000000502000029000001050020009c00000105020080410000004002200210000003a60000013d000000000003004b000003fb0000613d000000000400001900000000052400190000000006140019000000000606043300000000006504350000002004400039000000000034004b000003f40000413d00000000012300190000000000010435000000000001042d000000000001042f00000402002104210000000102000039000000000001042d0000000002000019000000000001042d00000407002104230000000102000039000000000001042d0000000002000019000000000001042d0000040c002104250000000102000039000000000001042d0000000002000019000000000001042d0000040e000004320000040f0001042e000004100001043000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffff00000000000000000000000000000000000000000000000000000001ffffffe000000000000000000000000000000000000000000000000000000000ffffffe0000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffff1806aa1896bbf26568e884a7374b41e002500962caba6a15023a8d90e8508b830200000200000000000000000000000000000024000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffff360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbcffffffffffffffffffffffff00000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000bc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b000000000000000000000000000000000000000000000000ffffffffffffffa0206661696c656400000000000000000000000000000000000000000000000000416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c00000000000000000000000000000000000000000000000000000003ffffffe04e487b7100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002400000000000000000000000008c379a000000000000000000000000000000000000000000000000000000000416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000000000000000000000000000000000000000000064000000000000000000000000b53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d610302000000000000000000000000000000000000400000000000000000000000007e644d79422f17c01e4894b5f4f588d331ebfa28653d42ae832dc59e38c9798f00000002000000000000000000000000000000400000010000000000000000006464726573730000000000000000000000000000000000000000000000000000455243313936373a206e65772061646d696e20697320746865207a65726f206100000000000000000000000000000000000000840000000000000000000000006f74206120636f6e747261637400000000000000000000000000000000000000455243313936373a206e657720696d706c656d656e746174696f6e206973206effffffff000000000000000000000000000000000000000000000000000000005c60da1affffffffffffffffffffffffffffffffffffffffffffffffffffffff5c60da1b000000000000000000000000000000000000000000000000000000008f28397000000000000000000000000000000000000000000000000000000000f851a440000000000000000000000000000000000000000000000000000000003659cfe6000000000000000000000000000000000000000000000000000000004f1ef286000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000040000000800000000000000000000000000000000000000000000000000000000000000000ffffffffffffffe0000000000000000000000000000000000000000000000000ffffffffffffff800000000000000000000000000000000000000000000000a000000000000000005472616e73706172656e745570677261646561626c6550726f78793a2061646d696e2063616e6e6f742066616c6c6261636b20746f2070726f78792074617267657400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a4000000800000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0';
